
perf = {'activities': {'minConnections': '1', 'maxConnections': '50'},
        'blogs': {'minConnections': '1', 'maxConnections': '250'},
        'communities': {'minConnections': '10', 'maxConnections': '200'},
        'dogear': {'minConnections': '1', 'maxConnections': '150'},
        'files': {'minConnections': '10', 'maxConnections': '100'},
        'forum': {'minConnections': '50', 'maxConnections': '100'},
        'homepage': {'minConnections': '20', 'maxConnections': '100'},
        'metrics': {'minConnections': '1', 'maxConnections': '75'},
        'mobile': {'minConnections': '1', 'maxConnections': '100'},
        'news': {'minConnections': '50', 'maxConnections': '75'},
        'oauth provider': {'minConnections': '1', 'maxConnections': '50'},
        'profiles': {'minConnections': '1', 'maxConnections': '100'},
        'pushnotification': {'minConnections': '25', 'maxConnections': '75'},
        'search': {'minConnections': '50', 'maxConnections': '75'},
        'urlpreview': {'minConnections': '50', 'maxConnections': '75'},
        'widgetcontainer': {'minConnections': '50', 'maxConnections': '75'},
        'wikis': {'minConnections': '1', 'maxConnections': '100'},
        'xcc': {'minConnections': '10', 'maxConnections': '100'}}

statementCacheSize = '100'

for db in perf.keys():    # Looping through databases
        
        try:
            t1 = AdminConfig.getid('/DataSource:' + db + '/')
            AdminConfig.modify(
                t1, '[[statementCacheSize "' + str(statementCacheSize) + '"]]')
            AdminConfig.modify(t1, '[[connectionPool [[minConnections "' + str(perf[db][
                               'minConnections']) + '"][maxConnections "' + str(perf[db]['maxConnections']) + '"]]]]')
        except:
            print 'Error'

if (AdminConfig.hasChanges()):
    print('Changed')
    AdminConfig.save()